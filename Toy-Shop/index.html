<!DOCTYPE html>
<html style="height:100%;">
<head>
<meta charset="UTF-8">
<meta name="authoring-tool" content="Adobe_Animate_CC">
<title>Toy Shop</title>
<meta name="robots" content="index,nofollow" />
<meta name="apple-touch-fullscreen" content="yes" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<meta name="mobile-web-app-capable" content="yes"/>
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="//code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<script src="azgametv.js"></script>
<link  type="text/css" rel="stylesheet" href="preloader.css" />
<meta property="og:title" content="The Game Will Continue After A Short Break"/>
<script>
var isvisible=true;	
document.addEventListener("visibilitychange", handleVisibilityChange, false);	
function getGamename() {
	var url = window.location.href;
	if(url.indexOf("127.0.0.1") >= 0) {
		return "game-under-construction";
	}
	else {
		url = url.split("?")[0];
		var parts = url.split("/");
		var last = parts[parts.length - 1];
		if(!last || last.indexOf(".html") >= 0) {
			return parts[parts.length - 2];
		}
		else return last;
	}
}
function makeDivResponsive($div) {
	//var $div = $("#_preload_div_");
	if(!$div.attr("data-width")) $div.attr("data-width", $div.width());
	if(!$div.attr("data-height")) $div.attr("data-height", $div.height());
	var ratio_w = $(window).width() / $div.attr("data-width");
	var ratio_h = $(window).height() / $div.attr("data-height");
	if(ratio_w > ratio_h) {
		$div.css("transform", "scale("+ratio_h+")");
	}
	else {
		$div.css("transform", "scale("+ratio_w+")");
	}
	$div.css("left", ($(window).width() - $div[0].getBoundingClientRect().width) / 2);
	$div.css("top", ($(window).height() - $div[0].getBoundingClientRect().height) / 2);
}
function url_domain(data) {
	var a = document.createElement('a');
	a.href = data;
	return a.hostname;
}
$(document).ready(function() {
	setInterval(function() {
		makeDivResponsive($("#_preload_div_"));
	}, 300)
	makeDivResponsive($("#_preload_div_"));
	//alert($(window).width())
})
$(document).ready(function() {
	$("#_preload_div_, #_preload_div_ *").css({
		"-webkit-user-select": "none",
		"-moz-user-select": "none",
		"-ms-user-select": "none",
		"-o-user-select": "none",
		"user-select": "none",
		"-webkit-tap-highlight-color": "rgba(0, 0, 0, 0)",
		"-moz-tap-highlight-color": "rgba(0, 0, 0, 0)",
		"tap-highlight-color": "rgba(0, 0, 0, 0)"
	}).attr("unselectable", "on");
})
var gdSettings = {
	gameId: "1621670ce7234249a7f9818a1b46b970",
	userId: "F6BA10C4-D755-4E68-AA70-B950E8B3870C-s1"
};
var	preloaderUrl = "//www.azgametv.com";
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-124188085-1', 'auto');
  ga('send', 'pageview');
$(document).ready(function() {
	$("title").text(getGamename().toLowerCase().replace(/-/g, " ").replace(/\b[a-z]/g, function(letter) {
    	return letter.toUpperCase();
	}));
})
var stringHostDaria = detect_parent_Daria();
var QueryStringFlorin = function () {
	var query_string = {};
	var query = window.location.search.substring(1);
	var vars = query.split("&");
	for (var i = 0; i < vars.length; i++) {
		var pair = vars[i].split("=");
			if (typeof query_string[pair[0]] === "undefined") {
				query_string[pair[0]] = decodeURIComponent(pair[1]);
			} else if (typeof query_string[pair[0]] === "string") {
				var arr = [query_string[pair[0]], decodeURIComponent(pair[1])];
				query_string[pair[0]] = arr;
			} else {
				query_string[pair[0]].push(decodeURIComponent(pair[1]));
			}
		}
		return query_string;
		}();
var adsInGame = false;
var gdAds = false;
if   (QueryStringFlorin.part == "gd") {gdAds = true; console.log(gdAds);}
function detect_parent_Daria() {
	var iframe = (parent !== window);
	var url = null;
	if (iframe) {
		url = document.referrer;
		ref = url.match(/:\/\/(.[^/]+)/)[1];
		return ref;
	}
	return "daria";
}
if (stringHostDaria == "daria") {
	stringHostDaria = window.location.hostname;
}
function realClick(a,b){b="undefined"!=typeof b?b:"canvas";var c=$("#rurl"),d=$(b);c.css({display:"block",top:d.offset().top,left:d.offset().left,width:d.width(),height:d.height()}),c.prop("href",a).prop("target","_blank"),fireEvent(document.getElementById("rurl"),"click"),setTimeout(function(){c.css({display:"none"})},100)}function fireEvent(a,b){var c;if(a.ownerDocument)c=a.ownerDocument;else{if(9!=a.nodeType)throw new Error("Invalid node passed to fireEvent: "+a.id);c=a}if(a.dispatchEvent){var d="";switch(b){case"click":case"mousedown":case"mouseup":d="MouseEvents";break;case"focus":case"change":case"blur":case"select":d="HTMLEvents";break;default:throw"fireEvent: Couldn't find an event class for event '"+b+"'."}var e=c.createEvent(d);e.initEvent(b,!0,!0),e.synthetic=!0,a.dispatchEvent(e,!0)}else if(a.fireEvent){var e=c.createEventObject();e.synthetic=!0,a.fireEvent("on"+b,e)}}
var canvas, stage, exportRoot, anim_container, dom_overlay_container, fnStartAnimation, clickablePreloader = true, gdApi;
var showingAds=false;
function handleVisibilityChange() {
	if (!showingAds)
	{
		if(isvisible) {
		isvisible=false;
		try {
			//exportRoot.checkSound();
			exportRoot.stopSnd();
		} catch (err) {console.log(err.message)}
		} else {
		isvisible=true;
		try{
			exportRoot.stopSnd();
exportRoot.removeSnd();
	exportRoot.startSnd();
			//exportRoot.checkSound2();
		}catch (err) {console.log(err.message)}
		}
	}
}
function init() {
	loadNextImage(lib.properties.manifest, 0);
}
function loadNextImage(manifest, pos) {
	if(manifest.length && manifest.length > pos) {
		var src = manifest[pos].src.split("?")[0];
		var ext = src.split(".").pop();
		if(ext == "png" || ext == "jpg" || ext == "gif" || ext == "jpeg") {
			var img = new Image();
			img.addEventListener("load", function() {
				var proc = Math.round(((pos + 1) * 100) / manifest.length);
				$("#progress_text").text(proc+" %");
				loadNextImage(manifest, pos + 1);
			})
			img.src = manifest[pos].src;
		}
		else {
			loadNextImage(manifest, pos + 1);
		}
	}
	else {
		gameInit()
	}
}
function getManifestPosById(id, manifest) {
	var pos = false;
	for(var i=0; i<manifest.length; i++) {
		if(manifest[i].id == id) return i;
	}
}
function gameInit() {
	canvas = document.getElementById("canvas");
	anim_container = document.getElementById("animation_container");
	dom_overlay_container = document.getElementById("dom_overlay_container");
	images = images||{};
	ss = ss||{};
	var loader = new createjs.LoadQueue(false);
	loader.installPlugin(createjs.Sound);
	loader.addEventListener("fileload", handleFileLoad);
	loader.addEventListener("complete", handleComplete);
	loader.loadManifest(lib.properties.manifest);
		for (var i = 0; i < partnerUrlArray.length; i++) { //Parteneri Adsense
 if (stringHostDaria == partnerUrlArray[i]) {
  adsInGame = true;  //Adsense activat
 }
}
}
function handleFileLoad(evt) {	
	if(evt.item.type != "image") {
		var pos = getManifestPosById(evt.item.id, lib.properties.manifest);
		var proc = Math.round(((pos + 1) * 100) / lib.properties.manifest.length);
	}
	if (evt.item.type == "image") { images[evt.item.id] = evt.result; }
}
function handleComplete(evt) {
	//This function is always called, irrespective of the content. You can use the variable "stage" after it is created in token create_stage.
	var queue = evt.target;
	var ssMetadata = lib.ssMetadata;
	for(i=0; i<ssMetadata.length; i++) {
		ss[ssMetadata[i].name] = new createjs.SpriteSheet( {"images": [queue.getResult(ssMetadata[i].name)], "frames": ssMetadata[i].frames} )
	}
	var preloaderDiv = document.getElementById("_preload_div_");
	preloaderDiv.style.display = 'none';
	$("#animation_container").show();
	clickablePreloader = false;
	preloaderDiv.style.cursor = "auto";
	canvas.style.display = 'block';
	exportRoot = new lib.game();
	stage = new createjs.Stage(canvas);
	stage.addChild(exportRoot);	
	//Registers the "tick" event listener.
	fnStartAnimation = function() {
		createjs.Ticker.setFPS(lib.properties.fps);
		createjs.Ticker.addEventListener("tick", stage);
	}
	if(gdAds === true) {
		var settings = {
			gameId: gdSettings.gameId,
			userId: gdSettings.userId,
			resumeGame: resumeGame,
			pauseGame: pauseGame,
			onInit: function (data) {},
			onError: function (data) {
				console.log("Error:" + data);
			}
		};
		(function(i,s,o,g,r,a,m){
				i['GameDistribution']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)};i[r].l=1*new Date();a=s.createElement(o);m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a, m);
			})(window, document, 'script', '//html5.api.gamedistribution.com/libs/gd/api.js', 'gdApi');
			gdApi(settings);
	function resumeGame() {
			showingAds = false;
			setTimeout(function() {
				exportRoot.startSnd();
			}, 100);
			console.log("Resume game");
		}
		function pauseGame() {
			showingAds = true;
			setTimeout(function() {
				exportRoot.stopSnd();
			}, 100);
			console.log("Pause game");
		}
	}
	//Code to support hidpi screens and responsive scaling.
	function makeResponsive(isResp, respDim, isScale, scaleType) {		
		var lastW, lastH, lastS=1;		
		window.addEventListener('resize', resizeCanvas);		
		resizeCanvas();		
		function resizeCanvas() {			
			var w = lib.properties.width, h = lib.properties.height;			
			var iw = window.innerWidth, ih=window.innerHeight;			
			var pRatio = window.devicePixelRatio || 1, xRatio=iw/w, yRatio=ih/h, sRatio=1;			
			if(isResp) {                
				if((respDim=='width'&&lastW==iw) || (respDim=='height'&&lastH==ih)) {                    
					sRatio = lastS;                
				}				
				else if(!isScale) {					
					if(iw<w || ih<h)						
						sRatio = Math.min(xRatio, yRatio);				
				}				
				else if(scaleType==1) {					
					sRatio = Math.min(xRatio, yRatio);				
				}				
				else if(scaleType==2) {					
					sRatio = Math.max(xRatio, yRatio);				
				}			
			}			
			canvas.width = w*pRatio*sRatio;			
			canvas.height = h*pRatio*sRatio;
			canvas.style.width = anim_container.style.width = dom_overlay_container.style.width = preloaderDiv.style.width = w*sRatio+'px';				
			canvas.style.height = anim_container.style.height = dom_overlay_container.style.height = preloaderDiv.style.height = h*sRatio+'px';
			stage.scaleX = pRatio*sRatio;			
			stage.scaleY = pRatio*sRatio;			
			lastW = iw; lastH = ih; lastS = sRatio;		
		}
	}
	makeResponsive(true,'both',true,1);	
	fnStartAnimation();
}
function playSound(id, loop) {
	return createjs.Sound.play(id, createjs.Sound.INTERRUPT_EARLY, 0, 0, loop);
}
if (typeof(preloaderUrl) === "undefined") {
var	preloaderUrl = "//www.azgametv.com";
}
$(document).ready(function() {
	$("body").on('click',  function(event) {
		if(clickablePreloader){
			$("#rurl").on("click", function(event) {
				event.stopPropagation();
			})
			realClick(preloaderUrl+'?utm_campaign='+getGamename()+'&utm_medium=preloader&utm_content=preloader&utm_source='+stringHostDaria, "body");
		}
	});
})
</script>
<script src="game.js"></script>
</head>
<body onload="init();" style="padding:0; height:100%; width:100%; margin:0px;background-color: #f284cf;">
<div style="width:100%;height:100%;position:absolute;pointer-events:none;" align="center" id="gameMovie" name="gameMovie">
  <div class="myWgLoader"></div>
</div>
<div id="animation_container" style="width:800px; height:600px">
  <canvas id="canvas" width="800" height="600" style="position: absolute; display: none;"></canvas>
  <div id="dom_overlay_container" style="pointer-events:none; overflow:hidden; width:800px; height:600px; position: absolute; left: 0px; top: 0px; display: none;"> </div>
</div>
<div id='_preload_div_' style='display: inline-block; background:url("preloaderdora.jpg"); height:600px; width: 800px; vertical-align=middle;position:absolute;left:0px;top:0px;text-align: center;cursor: pointer'><span style='display: inline-block; height: 100%; vertical-align: middle;'></span> <span id="preload_loading" style='vertical-align: bottom; margin-bottom: -100px; max-height: 100%; display: inline-block; position: relative'> <img  src="load.gif" style="display: block" /> <span id="progress_text">0 %</span> </span> </div>
<a id="rurl" href="#"></a>
</body>
</html>